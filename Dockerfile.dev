FROM node:20-alpine

WORKDIR /app

# Install development dependencies
COPY package*.json ./
RUN npm install

# Generate Drizzle types (needed for development)
COPY drizzle.config.ts ./
COPY src/db ./src/db
RUN npm run db:generate

# The rest of the source code will be mounted as a volume
CMD ["npm", "run", "dev"] 